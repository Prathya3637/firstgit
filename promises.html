<!DOCTYPE html>
<html>
<head>
    <title>Promises</title>
</head>
<body>

    <script>
        const posts = [
            { title: 'Post One', body: 'This is post one' },
            { title: 'Post Two', body: 'This is post two' }
        ];

        function getPost() {
            setTimeout(() => {
                let output = '';
                posts.forEach((post, index) => {
                    output += `<li>${post.title}</li>`;
                });
                document.body.innerHTML = output;
            }, 1000);
        }

        function createPost(post) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    posts.push(post);
                    const error = false;
                    if (!error) {
                        resolve();
                    } else {
                        reject('Error creating post');
                    }
                }, 2000);
            });
        }

        function updateLastUserActivityTime() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const lastActivityTime = new Date().toLocaleTimeString();
                    resolve(lastActivityTime);
                }, 1000);
            });
        }

        function deletePost() {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    posts.pop(); 
                    const error = false;
                    if (!error) {
                        resolve();
                    } else {
                        reject('Error deleting post');
                    }
                }, 1000);
            });
        }

        
        Promise.all([createPost({ title: 'Post Three', body: 'This is post three' }), updateLastUserActivityTime()])
            .then(([_, lastActivityTime]) => {
                console.log('Last activity time:', lastActivityTime);
                getPost(); 
                return deletePost(); 
            })
            .then(() => {
                console.log('Post deleted successfully.');
                getPost();
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    </script>

</body>
</html>
